#### 生命周期钩子函数执行原理分析

> 每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做**生命周期钩子**的函数，这给了用户在不同阶段添加自己的代码的机会。
>
> 比如 [`created`](https://cn.vuejs.org/v2/api/#created) 钩子可以用来在一个实例被创建之后执行代码：
>
> ```js
> new Vue({
>   data: {
>     a: 1
>   },
>   created: function () {
>     // `this` 指向 vm 实例
>     console.log('a is: ' + this.a)
>   }
> })
> // => "a is: 1"
> ```
>
> 也有一些其它的钩子，在实例生命周期的不同阶段被调用，如 [`mounted`](https://cn.vuejs.org/v2/api/#mounted)、[`updated`](https://cn.vuejs.org/v2/api/#updated) 和 [`destroyed`](https://cn.vuejs.org/v2/api/#destroyed)。生命周期钩子的 `this` 上下文指向调用它的 Vue 实例。

##### 一、生命周期示意图

<img src="生命周期钩子函数执行原理分析.assets/image-20220412154825434.png" alt="image-20220412154825434" style="zoom: 25%;" align="left"/>

##### 二、vue的初始化

1. Vue作为构造函数时this指向实例，Vue作为方法时this指向window
2. 初始化时`_init`是放在`inintMixin`方法里面的，并且给Vue的原型进行扩展：`Vue.prototype._init`
3. 在new Vue之前就会进行选项合并vm.$options = mergeOptions()，因为自执行函数将Vue构造函数返回并挂在全局之前，就在执行initMixin(Vue)方法。而选项合并就发生在initMixin这个方法里面
4. Ctor指向Vue构造函数本身，什么情况下才会有Ctor.super存在？当有子组件或者子类才会有super
5. vm.$options选项合并里面有vue程序自身设计时加入的选项，也有用户在new Vue时传入的选项，程序自身设计时加入的选项是通过把枚举遍历创建对象，最后把枚举对象一个个添加给Vue.options。而这些components，filters，directives枚举对象里面又内置了一些内容，比如内置组件、内置指令，内置过滤最终都能通过Vue的实例去访问到